const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = process.env.EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: New York USA, for 1 Days and 1 Night for Family with a luxury budget with a Flight details, Flight price with booking URL, Hotels options list with hotel name, hotel address , price , hotel image URL, geo coordinates, rating, descriptions and places to visit nearby with place name, place details, Place image URL, Geo co ordinates, ticket pricing, Time to travel to each of the location for 1 days and 1 night with each day plan with best time to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"trip\": {\n    \"destination\": \"New York City, USA\",\n    \"duration\": \"1 day and 1 night\",\n    \"budget\": \"Luxury\",\n    \"travelers\": \"Family\",\n    \"flight\": {\n      \"details\": \"Round-trip flight from [Your Departure City] to New York City (JFK/LGA/EWR)\",\n      \"price\": \"Please replace this with the actual price based on your chosen dates and airlines.\",\n      \"booking_url\": \"Please replace this with the URL of a booking website like Expedia, Kayak, or Google Flights where you can search for flights.\"\n    },\n    \"hotel\": [\n      {\n        \"name\": \"The Peninsula New York\",\n        \"address\": \"700 Fifth Avenue, New York, NY 10019\",\n        \"price\": \"Starting from $1,500 per night\",\n        \"image_url\": \"https://www.peninsula.com/en/new-york/images/hotel-gallery/peninsula-new-york-exterior.jpg\",\n        \"geo_coordinates\": \"40.7580,-73.9775\",\n        \"rating\": \"4.8 stars\",\n        \"description\": \"A luxurious and iconic hotel in Midtown Manhattan, known for its elegant rooms, world-class dining, and impeccable service.\",\n        \"nearby_places\": [\n          {\n            \"name\": \"Central Park\",\n            \"details\": \"A vast urban park with scenic walks, gardens, and attractions like the Bethesda Terrace and Strawberry Fields.\",\n            \"image_url\": \"https://www.nycgo.com/images/things-to-do/attractions/central-park-nyc-1-400x253.jpg\",\n            \"geo_coordinates\": \"40.7829, -73.9654\",\n            \"ticket_pricing\": \"Free\",\n            \"time_to_travel\": \"15 minutes walk from the hotel\"\n          },\n          {\n            \"name\": \"Museum of Modern Art (MoMA)\",\n            \"details\": \"A renowned museum showcasing modern and contemporary art from around the world.\",\n            \"image_url\": \"https://www.moma.org/media/images/moma-logo-stacked.png\",\n            \"geo_coordinates\": \"40.7614, -73.9772\",\n            \"ticket_pricing\": \"Adult $25\",\n            \"time_to_travel\": \"10 minutes walk from the hotel\"\n          }\n        ]\n      },\n      {\n        \"name\": \"The Mark Hotel\",\n        \"address\": \"25 East 77th Street, New York, NY 10075\",\n        \"price\": \"Starting from $2,000 per night\",\n        \"image_url\": \"https://www.themarkhotel.com/images/hero-images/the-mark-hotel-exterior-1.jpg\",\n        \"geo_coordinates\": \"40.7723, -73.9623\",\n        \"rating\": \"4.9 stars\",\n        \"description\": \"A sophisticated and luxurious hotel on the Upper East Side, renowned for its elegant suites, fine dining, and exceptional service.\",\n        \"nearby_places\": [\n          {\n            \"name\": \"Metropolitan Museum of Art\",\n            \"details\": \"One of the world's largest and most comprehensive art museums, with a vast collection spanning centuries and cultures.\",\n            \"image_url\": \"https://www.metmuseum.org/sites/default/files/styles/large_gallery_image/public/images/2022-02/MET-Exterior-Web.jpg?itok=82y7rL9m\",\n            \"geo_coordinates\": \"40.7794, -73.9632\",\n            \"ticket_pricing\": \"Suggested donation $25\",\n            \"time_to_travel\": \"10 minutes walk from the hotel\"\n          },\n          {\n            \"name\": \"The Frick Collection\",\n            \"details\": \"A museum housed in a Gilded Age mansion showcasing European paintings, sculpture, and decorative arts.\",\n            \"image_url\": \"https://www.frick.org/sites/default/files/styles/hero_large/public/images/frick-collection-hero-image_0.jpg?itok=x0hZ6_hM\",\n            \"geo_coordinates\": \"40.7685, -73.9606\",\n            \"ticket_pricing\": \"Adult $25\",\n            \"time_to_travel\": \"5 minutes walk from the hotel\"\n          }\n        ]\n      },\n      {\n        \"name\": \"The Carlyle, A Rosewood Hotel\",\n        \"address\": \"35 East 76th Street, New York, NY 10021\",\n        \"price\": \"Starting from $1,800 per night\",\n        \"image_url\": \"https://www.rosewoodhotels.com/media/images/properties/carlyle-new-york/carlyle-new-york-exterior-01.jpg\",\n        \"geo_coordinates\": \"40.7728, -73.9637\",\n        \"rating\": \"4.7 stars\",\n        \"description\": \"A legendary hotel known for its sophisticated ambiance, elegant rooms, and renowned restaurant, Bemelmans Bar.\",\n        \"nearby_places\": [\n          {\n            \"name\": \"The Guggenheim Museum\",\n            \"details\": \"A distinctive museum showcasing modern and contemporary art in a spiral building designed by Frank Lloyd Wright.\",\n            \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4a/Guggenheim_Museum_exterior_2012.jpg/1200px-Guggenheim_Museum_exterior_2012.jpg\",\n            \"geo_coordinates\": \"40.7822, -73.9554\",\n            \"ticket_pricing\": \"Adult $25\",\n            \"time_to_travel\": \"15 minutes walk from the hotel\"\n          },\n          {\n            \"name\": \"Central Park\",\n            \"details\": \"A vast urban park with scenic walks, gardens, and attractions like the Bethesda Terrace and Strawberry Fields.\",\n            \"image_url\": \"https://www.nycgo.com/images/things-to-do/attractions/central-park-nyc-1-400x253.jpg\",\n            \"geo_coordinates\": \"40.7829, -73.9654\",\n            \"ticket_pricing\": \"Free\",\n            \"time_to_travel\": \"10 minutes walk from the hotel\"\n          }\n        ]\n      }\n    ],\n    \"itinerary\": {\n      \"day1\": {\n        \"morning\": {\n          \"time\": \"9:00 AM - 12:00 PM\",\n          \"activity\": \"Explore Central Park\",\n          \"details\": \"Take a leisurely stroll through the park, visit the Bethesda Terrace, Strawberry Fields, and enjoy the picturesque scenery.\",\n          \"best_time_to_visit\": \"Morning for a peaceful experience and fewer crowds\"\n        },\n        \"afternoon\": {\n          \"time\": \"1:00 PM - 4:00 PM\",\n          \"activity\": \"Lunch at The Polo Bar\",\n          \"details\": \"Enjoy a luxurious lunch at this upscale restaurant known for its classic American cuisine and elegant atmosphere.\",\n          \"best_time_to_visit\": \"Afternoon for a relaxed dining experience\"\n        },\n        \"evening\": {\n          \"time\": \"5:00 PM - 8:00 PM\",\n          \"activity\": \"Shop at Fifth Avenue\",\n          \"details\": \"Browse the world-renowned designer boutiques and flagship stores on Fifth Avenue, indulge in luxury shopping.\",\n          \"best_time_to_visit\": \"Late afternoon for a leisurely shopping experience\"\n        },\n        \"night\": {\n          \"time\": \"9:00 PM - 11:00 PM\",\n          \"activity\": \"Dinner and a show\",\n          \"details\": \"Dine at a Michelin-starred restaurant like Le Bernardin, followed by a Broadway show for a memorable evening.\",\n          \"best_time_to_visit\": \"Evening for a vibrant and energetic atmosphere\"\n        }\n      },\n      \"day2\": {\n        \"morning\": {\n          \"time\": \"9:00 AM - 12:00 PM\",\n          \"activity\": \"Visit the Metropolitan Museum of Art\",\n          \"details\": \"Explore the vast collection of art from around the world, including paintings, sculptures, and decorative arts.\",\n          \"best_time_to_visit\": \"Morning for a less crowded experience\"\n        },\n        \"afternoon\": {\n          \"time\": \"1:00 PM - 4:00 PM\",\n          \"activity\": \"Lunch at The Russian Tea Room\",\n          \"details\": \"Enjoy a classic afternoon tea experience at this iconic restaurant, known for its elegant atmosphere and traditional Russian cuisine.\",\n          \"best_time_to_visit\": \"Afternoon for a refined and leisurely dining experience\"\n        },\n        \"evening\": {\n          \"time\": \"5:00 PM - 8:00 PM\",\n          \"activity\": \"Relax and enjoy the city views\",\n          \"details\": \"Visit the Top of the Rock or the Empire State Building for panoramic views of the city skyline.\",\n          \"best_time_to_visit\": \"Evening for breathtaking city lights\"\n        },\n        \"night\": {\n          \"time\": \"9:00 PM - 11:00 PM\",\n          \"activity\": \"Enjoy a jazz concert\",\n          \"details\": \"Experience the vibrant jazz scene in New York City at a renowned venue like the Blue Note Jazz Club or the Village Vanguard.\",\n          \"best_time_to_visit\": \"Night for a lively and intimate atmosphere\"\n        }\n      }\n    }\n  }\n}\n```\n\n**Please Note:**\n\n* This is a sample itinerary and can be customized based on your family's interests and preferences.\n* Prices for flights, hotels, and attractions are subject to change and availability.\n* It's recommended to book your flights and accommodation in advance, especially during peak travel season.\n* Consider purchasing a CityPASS for discounted entry to several major attractions. \n"},
          ],
        },
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: undefined, for 5 Days and 4 Night for Just Me with a Moderate budget with a Flight details, Flight price with booking URL, Hotels options list with hotel name, hotel address , price , hotel image URL, geo coordinates, rating, descriptions and places to visit nearby with place name, place details, Place image URL, Geo co ordinates, ticket pricing, Time to travel to each of the location for 5 days and 4 night with each day plan with best time to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"trip\": {\n    \"destination\": \"Please specify your desired destination\", \n    \"duration\": \"5 days and 4 nights\",\n    \"budget\": \"Moderate\",\n    \"travelers\": \"Solo traveler\",\n    \"flight\": {\n      \"details\": \"Round-trip flight from [Your Departure City] to [Destination City] ([Airport Code])\",\n      \"price\": \"Please replace this with the actual price based on your chosen dates and airlines.\",\n      \"booking_url\": \"Please replace this with the URL of a booking website like Expedia, Kayak, or Google Flights where you can search for flights.\"\n    },\n    \"hotel\": [\n      {\n        \"name\": \"Please replace with a hotel name relevant to your destination\",\n        \"address\": \"Please replace with the hotel address\",\n        \"price\": \"Please replace with the actual price per night\",\n        \"image_url\": \"Please replace with the URL of a hotel image\",\n        \"geo_coordinates\": \"Please replace with the hotel's latitude and longitude\",\n        \"rating\": \"Please replace with the hotel's star rating\",\n        \"description\": \"Please replace with a brief description of the hotel\",\n        \"nearby_places\": [\n          {\n            \"name\": \"Please replace with a nearby attraction\",\n            \"details\": \"Please replace with a brief description of the attraction\",\n            \"image_url\": \"Please replace with the URL of an image for the attraction\",\n            \"geo_coordinates\": \"Please replace with the attraction's latitude and longitude\",\n            \"ticket_pricing\": \"Please replace with the ticket price\",\n            \"time_to_travel\": \"Please replace with the estimated travel time from the hotel\"\n          }\n        ]\n      }\n    ],\n    \"itinerary\": {\n      \"day1\": {\n        \"morning\": {\n          \"time\": \"9:00 AM - 12:00 PM\",\n          \"activity\": \"Please replace with a morning activity\",\n          \"details\": \"Please replace with a detailed description of the activity\",\n          \"best_time_to_visit\": \"Please replace with the best time to visit\"\n        },\n        \"afternoon\": {\n          \"time\": \"1:00 PM - 4:00 PM\",\n          \"activity\": \"Please replace with an afternoon activity\",\n          \"details\": \"Please replace with a detailed description of the activity\",\n          \"best_time_to_visit\": \"Please replace with the best time to visit\"\n        },\n        \"evening\": {\n          \"time\": \"5:00 PM - 8:00 PM\",\n          \"activity\": \"Please replace with an evening activity\",\n          \"details\": \"Please replace with a detailed description of the activity\",\n          \"best_time_to_visit\": \"Please replace with the best time to visit\"\n        },\n        \"night\": {\n          \"time\": \"9:00 PM - 11:00 PM\",\n          \"activity\": \"Please replace with a nighttime activity\",\n          \"details\": \"Please replace with a detailed description of the activity\",\n          \"best_time_to_visit\": \"Please replace with the best time to visit\"\n        }\n      },\n      \"day2\": {\n        \"morning\": {\n          \"time\": \"9:00 AM - 12:00 PM\",\n          \"activity\": \"Please replace with a morning activity\",\n          \"details\": \"Please replace with a detailed description of the activity\",\n          \"best_time_to_visit\": \"Please replace with the best time to visit\"\n        },\n        \"afternoon\": {\n          \"time\": \"1:00 PM - 4:00 PM\",\n          \"activity\": \"Please replace with an afternoon activity\",\n          \"details\": \"Please replace with a detailed description of the activity\",\n          \"best_time_to_visit\": \"Please replace with the best time to visit\"\n        },\n        \"evening\": {\n          \"time\": \"5:00 PM - 8:00 PM\",\n          \"activity\": \"Please replace with an evening activity\",\n          \"details\": \"Please replace with a detailed description of the activity\",\n          \"best_time_to_visit\": \"Please replace with the best time to visit\"\n        },\n        \"night\": {\n          \"time\": \"9:00 PM - 11:00 PM\",\n          \"activity\": \"Please replace with a nighttime activity\",\n          \"details\": \"Please replace with a detailed description of the activity\",\n          \"best_time_to_visit\": \"Please replace with the best time to visit\"\n        }\n      },\n      \"day3\": {\n        \"morning\": {\n          \"time\": \"9:00 AM - 12:00 PM\",\n          \"activity\": \"Please replace with a morning activity\",\n          \"details\": \"Please replace with a detailed description of the activity\",\n          \"best_time_to_visit\": \"Please replace with the best time to visit\"\n        },\n        \"afternoon\": {\n          \"time\": \"1:00 PM - 4:00 PM\",\n          \"activity\": \"Please replace with an afternoon activity\",\n          \"details\": \"Please replace with a detailed description of the activity\",\n          \"best_time_to_visit\": \"Please replace with the best time to visit\"\n        },\n        \"evening\": {\n          \"time\": \"5:00 PM - 8:00 PM\",\n          \"activity\": \"Please replace with an evening activity\",\n          \"details\": \"Please replace with a detailed description of the activity\",\n          \"best_time_to_visit\": \"Please replace with the best time to visit\"\n        },\n        \"night\": {\n          \"time\": \"9:00 PM - 11:00 PM\",\n          \"activity\": \"Please replace with a nighttime activity\",\n          \"details\": \"Please replace with a detailed description of the activity\",\n          \"best_time_to_visit\": \"Please replace with the best time to visit\"\n        }\n      },\n      \"day4\": {\n        \"morning\": {\n          \"time\": \"9:00 AM - 12:00 PM\",\n          \"activity\": \"Please replace with a morning activity\",\n          \"details\": \"Please replace with a detailed description of the activity\",\n          \"best_time_to_visit\": \"Please replace with the best time to visit\"\n        },\n        \"afternoon\": {\n          \"time\": \"1:00 PM - 4:00 PM\",\n          \"activity\": \"Please replace with an afternoon activity\",\n          \"details\": \"Please replace with a detailed description of the activity\",\n          \"best_time_to_visit\": \"Please replace with the best time to visit\"\n        },\n        \"evening\": {\n          \"time\": \"5:00 PM - 8:00 PM\",\n          \"activity\": \"Please replace with an evening activity\",\n          \"details\": \"Please replace with a detailed description of the activity\",\n          \"best_time_to_visit\": \"Please replace with the best time to visit\"\n        },\n        \"night\": {\n          \"time\": \"9:00 PM - 11:00 PM\",\n          \"activity\": \"Please replace with a nighttime activity\",\n          \"details\": \"Please replace with a detailed description of the activity\",\n          \"best_time_to_visit\": \"Please replace with the best time to visit\"\n        }\n      },\n      \"day5\": {\n        \"morning\": {\n          \"time\": \"9:00 AM - 12:00 PM\",\n          \"activity\": \"Please replace with a morning activity\",\n          \"details\": \"Please replace with a detailed description of the activity\",\n          \"best_time_to_visit\": \"Please replace with the best time to visit\"\n        },\n        \"afternoon\": {\n          \"time\": \"1:00 PM - 4:00 PM\",\n          \"activity\": \"Please replace with an afternoon activity\",\n          \"details\": \"Please replace with a detailed description of the activity\",\n          \"best_time_to_visit\": \"Please replace with the best time to visit\"\n        },\n        \"evening\": {\n          \"time\": \"5:00 PM - 8:00 PM\",\n          \"activity\": \"Departure\",\n          \"details\": \"Head to the airport for your flight home.\",\n          \"best_time_to_visit\": \"N/A\"\n        },\n        \"night\": {\n          \"time\": \"N/A\",\n          \"activity\": \"N/A\",\n          \"details\": \"N/A\",\n          \"best_time_to_visit\": \"N/A\"\n        }\n      }\n    }\n  }\n}\n```\n\n**Instructions:**\n\n1. **Replace the Placeholders:**  Fill in the bracketed placeholders with the appropriate information for your desired destination.\n2. **Specify Your Destination:**  Start by filling in the \"destination\" field with your desired travel location. \n3. **Search for Flights and Hotels:** Use the provided placeholder URLs to search for flights and hotels that fit your budget and dates. \n4. **Customize Your Itinerary:**  Fill in the activities and details for each day based on your interests.\n\n**Example of a Completed Itinerary:**\n\n```json\n{\n  \"trip\": {\n    \"destination\": \"Paris, France\",\n    \"duration\": \"5 days and 4 nights\",\n    \"budget\": \"Moderate\",\n    \"travelers\": \"Solo traveler\",\n    \"flight\": {\n      \"details\": \"Round-trip flight from New York City (JFK) to Paris (CDG)\",\n      \"price\": \"$600\",\n      \"booking_url\": \"https://www.google.com/flights\" \n    },\n    \"hotel\": [\n      {\n        \"name\": \"HÃ´tel du Nord\",\n        \"address\": \"10, Rue du Nord, 75010 Paris\",\n        \"price\": \"$150 per night\",\n        \"image_url\": \"https://www.hotel-du-nord.com/images/hotel-du-nord-paris.jpg\",\n        \"geo_coordinates\": \"48.8715, 2.3574\",\n        \"rating\": \"4 stars\",\n        \"description\": \"A charming hotel in the 10th arrondissement, known for its friendly staff and convenient location.\",\n        \"nearby_places\": [\n          {\n            \"name\": \"Canal Saint-Martin\",\n            \"details\": \"A picturesque canal with trendy cafes, bars, and boutiques.\",\n            \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/c/cf/Canal_Saint-Martin_%28Paris%29.jpg/1200px-Canal_Saint-Martin_%28Paris%29.jpg\",\n            \"geo_coordinates\": \"48.8704, 2.3627\",\n            \"ticket_pricing\": \"Free\",\n            \"time_to_travel\": \"5 minutes walk from the hotel\"\n          }\n        ]\n      }\n    ],\n    \"itinerary\": {\n      \"day1\": {\n        \"morning\": {\n          \"time\": \"9:00 AM - 12:00 PM\",\n          \"activity\": \"Visit the Louvre Museum\",\n          \"details\": \"Explore the world-famous museum, home to masterpieces like the Mona Lisa and Venus de Milo.\",\n          \"best_time_to_visit\": \"Morning for a less crowded experience\"\n        },\n        \"afternoon\": {\n          \"time\": \"1:00 PM - 4:00 PM\",\n          \"activity\": \"Lunch at a cafe in the Latin Quarter\",\n          \"details\": \"Enjoy a traditional French lunch in the charming Latin Quarter.\",\n          \"best_time_to_visit\": \"Afternoon for a relaxed and authentic experience\"\n        },\n        \"evening\": {\n          \"time\": \"5:00 PM - 8:00 PM\",\n          \"activity\": \"Walk along the Seine River\",\n          \"details\": \"Take a romantic stroll along the banks of the Seine, admiring the iconic bridges and views of the city.\",\n          \"best_time_to_visit\": \"Evening for a picturesque sunset\"\n        },\n        \"night\": {\n          \"time\": \"9:00 PM - 11:00 PM\",\n          \"activity\": \"Dinner at a traditional bistro\",\n          \"details\": \"Savor delicious French cuisine in a classic Parisian bistro.\",\n          \"best_time_to_visit\": \"Evening for a lively and authentic dining experience\"\n        }\n      },\n      // ... add details for days 2-5 \n    }\n  }\n}\n```"},
          ],
        },
      ],
    });
  
    // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
    // console.log(result.response.text());
